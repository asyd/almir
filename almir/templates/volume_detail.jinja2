{% extends "templates/base.jinja2" %}

{% block content %}
    <h1 class="view">Volume <small>{{ object.volumename }}</small></h1>
    <!-- TODO: inherit from job details -->
    <h2 class="view">Jobs <small>list</small></h2>
    <table class="table table-bordered datatables">
        <thead>
            <tr>
                <th>Name</th>
                <th>Status</th>
                <th>Type</th>
                <th>Level</th>
                <th>Size</th>
                <th>Files</th>
                <th>Client</th>
                <th>Started</th>
            </tr>
        </thead>
        <tbody>
            {% for job in object.jobs %}
                <tr class="clickable-row {{ job.status_color }}" data-link="{{ request.route_url('job_detail', id=job.jobid) }}">
                   <td>{{ job.name }}</td>
                   <td>{{ job.status_name }}</td>
                   <td>{{ job.type_name }}</td>
                   <td>{{ job.level_name }}</td>
                   <td>{{ macros.link(job.render_jobbytes(request)) }}</td>
                   <td>{{ job.jobfiles }}</td>
                   <td>{{ macros.link(job.render_client_name(request)) }}</td>
                   <td>{{ macros.link(job.render_starttime(request)) }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block sidebar %}
    <h1 class="view">Details</h1>
    <table class="table table-striped table-bordered table-condensed word-wrapped">
        <tbody>
            <tr>
                <td>Status:</td>
                <td>{{ object.volstatus }}</td>
            </tr>
            <tr>
                <td>Jobs:</td>
                <td>{{ object.voljobs }}</td>
            </tr>
            <tr>
                <td>Num of errors:</td>
                <td>{{ object.volerrors }}</td>
            </tr>
            <tr>
                <td>Num of files:</td>
                <td>{{ object.volfiles }}</td>
            </tr>
            <tr>
                <td>Size:</td>
                <td>{{ macros.link(object.render_volbytes(request)) }}</td>
            </tr>
            <tr>
                <td>Enabled:</td>
                <td>{{ macros.link(object.render_enabled(request)) }}</td>
            </tr>
            <tr>
                <td>Recycle:</td>
                <td>{{ macros.link(object.render_recycled(request)) }}</td>
            </tr>
            <tr>
                <td>Capacity:</td>
                <td>{{ macros.link(object.render_volcapacitybytes(request)) }}</td>
            </tr>
            <tr>
                <td>Pool:</td>
                <td>{{ macros.link(object.render_pool_name(request)) }}</td>
            </tr>
            <tr>
                <td>Storage:</td>
                <td>{{ macros.link(object.render_storage_name(request)) }}</td>
            </tr>
            <tr>
                <td>Max jobs:</td>
                <td>{{ object.maxvoljobs }}</td>
            </tr>
            <tr>
                <td>Max files:</td>
                <td>{{ object.maxvolfiles }}</td>
            </tr>
            <tr>
                <td>Max bytes:</td>
                <td>{{ macros.link(object.render_maxvolbytes(request)) }}</td>
            </tr>
            <tr>
                <td>Retention:</td>
                <!-- TODO: wtf is this? -->
                <td>{{ macros.link(object.render_volretention(request)) }}</td>
            </tr>
            <tr>
                <td>First written:</td>
                <td>{{ object.firstwritten }}</td>
            </tr>
            <tr>
                <td>Last written:</td>
                <td>{{ object.lastwritten }}</td>
            </tr>
        </tbody>
    </table>
{% endblock %}
