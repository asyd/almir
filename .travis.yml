language: python
python:
  - 2.6
  - 2.7
install:
  - sudo apt-get install git gcc python-dev sendmail bacula-console
  - cp buildout.d/templates/buildout.cfg.in buildout.cfg
  - sed -i 's/bacula.db/bacula_kaki.db/' buildout.cfg
  - director_password=$(sudo grep 'Password' /etc/bacula/bconsole.conf | sed 's/.*Password\s*=\s*"\(.\+\)"/\1/')
  - sed -i "s@director_password = @director_password = $director_password@" buildout.cfg
  - python bootstrap.py
  - bin/buildout

before_script:
  - "sh -e /etc/init.d/xvfb start"

script:
  - bin/nosetests
  - ./.travis_qunit_tests.sh

notifications:
  irc:
    - "irc.freenode.org#almir"
