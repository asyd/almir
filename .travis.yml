language: python
python:
  - 2.6
  - 2.7
install:
  - sudo apt-get install -y libevent-dev git gcc python-dev sendmail bacula-console
  - cp buildout.d/templates/buildout.cfg.in buildout.cfg
  - sudo cat /etc/bacula/bconsole.conf
  - sed -i 's/bacula.db/bacula_kaki.db/' buildout.cfg
  - director_password=$(sudo grep 'Password' /etc/bacula/bconsole.conf | sed 's/.*Password\s*=\s*"\(.\+\)"/\1/')
  - sed -i "s_director_password = _director_password = $director_password_" buildout.cfg
  - cat buildout.cfg
  - python bootstrap.py
  - bin/buildout
script: bin/nosetests

notifications:
  irc:
    - "irc.freenode.org#almir"
